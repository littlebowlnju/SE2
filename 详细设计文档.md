# 互联网酒店预订系统软件详细设计描述文档

## 文档修改历史

**大家写版本的时候就都写v1.0.x，不要一直递增**

| 修改人员 | 日期      | 修改原因                      | 版本号       |
| :------: | --------- | --------------------------| ------------ |
|  黄婉红  | 2020.06.13 | 添加了引言至体系结构设计描述部分 | V1.0.0 |
| 黄婉红  | 2020.06.22| 添加adminbl和userbl模块部分| V1.0.1|
| 王海辰| 2020.06.23 | 添加orderbl模块部分|V1.0.2|
| 项卓奇| 2020.06.23 | 添加hotelbl模块部分|V1.0.3|

## 目录
<!-- TOC -->

- [NJUSE酒店管理系统详细设计描述文档](#NJUSE酒店管理系统详细设计描述文档)
    - [文档修改历史](#文档修改历史)
    - [目录](#目录)
    - [1. 引言](#1-引言)
        - [1.1 编制目的](#11-编制目的)
        - [1.2 词汇表](#12-词汇表)
        - [1.3 参考资料](#13-参考资料)
    - [2. 产品描述](#2-产品描述)
    - [3. 系统结构设计概述](#3-系统结构设计概述)
    - [4. 结构视角](#4-结构视角)
        - [4.1 业务逻辑层的分解](#41-业务逻辑层的分解)
            - [4.1.1 adminbl模块](#411-adminbl模块)
            - [4.1.2 couponbl模块](#412-couponbl模块)
            - [4.1.3 hotelbl 模块](#413-hotelbl-模块)
            - [4.1.4 orderbl 模块](#414-orderbl-模块)
            - [4.1.5 userbl 模块](#415-userbl-模块)
    - [5. 依赖视角](#5-依赖视角)

<!-- /TOC -->

## 1.引言
### 1.1 编制目的

本报告详细完成对NJUSE酒店管理系统的详细设计，达到指导后续软件构造的目的，同时实现和测试人员用户的沟通。

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

### 1.2 词汇表

| 词汇名称 | 词汇含义      | 备注                 |
| :------: | --------- | :----: |
|  NJUSE-HMS  | NJUSE酒店管理系统 | 无 |

### 1.3 参考资料
《软件工程与计算（卷二）》

## 2.产品概述
参考NJUSE酒店管理系统用例文档和NJUSE酒店管理系统软件需求规格说明文档中对产品的概括描述。

## 3.系统结构设计描述
参考NJUSE酒店管理系统体系结构描述文档中对体系结构设计的描述。

## 4.结构视角
### 4.1 业务逻辑层的分解
业务逻辑层地开发包图如下图：
![](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E5%89%8D%E7%AB%AF.png)

#### 4.1.1 adminbl模块
（1）模块描述

    adminbl模块承担地需求参见需求规格说明文档功能需求及相关非功能需求。
    adminbl模块的职责及接口参见系统体系结构描述文档。
    
（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为web展示层、restful api层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会
添加接口。restful api层和业务逻辑层之间添加controller.admin.AdminController接口，controller.admin.AdminController接口通过调用
bl.admin.AdminService接口实现。业务逻辑层和数据层之间添加data.admin.AdminMapper接口。
这样，我们将依赖于接口而非实体类，增加了系统的灵活性。

adminbl模块的设计如下图所示：
![adminbl模块设计图]()

adminbl模块各个类的职责如下表所示：

|  模块 |  职责 |
| :-----: | :-----: |
|AdminService|接口类，负责提供网站管理员相关操作的接口|
|AdminServiceImpl|负责实现网站管理员相关操作|
|User|系统用户的领域模型对象，拥有使用者的身份信息，可以用于核验身份并提供相应身份的服务|

（3）模块内部类的接口规范
AdminServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        AdminServiceImpl.addManager
      </td>
      <td style="text-align: center;">
        语法
      </td>
      <td style="text-align: center;">
        public ResponseVO addManager(UserForm userForm);
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        前置条件
      </td>
      <td style="text-align: center;">
        已创建一个UserForm对象，并且输入符合输入规则
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        后置条件
      </td>
      <td style="text-align: center;">
        添加一个新的用户对象，并返回用户列表。
      </td>
    </tr>
    <tr>
          <td rowspan="3" colspan="1" style="text-align: center;">
            AdminServiceImpl.addMarketer
          </td>
          <td style="text-align: center;">
            语法
          </td>
          <td style="text-align: center;">
            public ResponseVO addMarketer(UserForm userForm);
          </td>
        </tr>
        <tr>
          <td style="text-align: center;">
            前置条件
          </td>
          <td style="text-align: center;">
            已创建一个UserForm对象，并且输入符合输入规则
          </td>
        </tr>
        <tr>
          <td style="text-align: center;">
            后置条件
          </td>
          <td style="text-align: center;">
            添加一个新的用户对象，并返回网站营销人员列表。
          </td>
        </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        AdminServiceImpl.getAllManagers
      </td>
      <td colspan="1" style="text-align: center;">
        语法
      </td>
      <td colspan="1" style="text-align: center;">
        public List&lt;User&gt; getAllManagers();
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        前置条件
      </td>
      <td colspan="1" style="text-align: center;">
        存在相应的列表数据
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        后置条件
      </td>
      <td colspan="1" style="text-align: center;">
        以列表形式返回所有酒店管理员信息
      </td>
    </tr>
     <tr>
          <td rowspan="3" colspan="1" style="text-align: center;">
            AdminServiceImpl.getAllMarketers
          </td>
          <td colspan="1" style="text-align: center;">
            语法
          </td>
          <td colspan="1" style="text-align: center;">
            public List&lt;User&gt; getAllMarketers();
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            前置条件
          </td>
          <td colspan="1" style="text-align: center;">
            存在相应的列表数据
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            后置条件
          </td>
          <td colspan="1" style="text-align: center;">
            以列表形式返回所有网站营销人员信息
          </td>
        </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        AdminServiceImpl.moveUser
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        public ResponseVO moveUser(int userId);
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在对应的用户ID</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>删除用户ID对应的用户信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>AdminServiceImpl.changeHotelManager</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p> public ResponseVO changeHotelManager(Integer hotelId, Integer managerId);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在对应的酒店ID和酒店管理员ID</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>指定参数中的酒店管理员ID为酒店ID对应酒店的管理员ID</p>
      </td>
    </tr> 
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的接口（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
    <tr>
       <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
          <p>vo.userForm</p>
       </td>
       <td rowspan="1" colspan="2" style="text-align: center;">
          <p>用户信息表单类</p>
       </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.User</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>用户实体类</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>AdminMapper.addManager(User user)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>新增一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>AdminMapper.getAllManagers()</p>
      </td>
      <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
        <p>以列表形式获取所有身份类型为HotelManager的用户单一持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p> AdminMapper.moveUser(int userId)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>根据用户ID删除一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>AdminMapper.changeHotelManager(int hotelId,Integer managerId)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
         指定managerId为hotelId对应酒店对象的管理员ID属性值
      </td>
    </tr>
  </tbody>
</table>

(4)业务逻辑层的动态模型

下图表明了NJUSE酒店管理系统中，当网站管理员填写好需要添加的用户表单时，网站管理员业务逻辑处理的相关对象之间的协作。（添加网站营销人员与添加酒店管理人员顺序相同，图略）

![addManager动态模型](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E6%B7%BB%E5%8A%A0%E7%AE%A1%E7%90%86%E5%91%98.png)

下图表明了NJUSE酒店管理系统中，当网站管理员填需要获取用户信息时，网站管理员业务逻辑处理的相关对象之间的协作。（获取网站营销人员信息与获取酒店管理人员信息顺序相同，图略）

![getAllManagers](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%8E%B7%E5%8F%96%E7%AE%A1%E7%90%86%E5%91%98.png)

下图表明了NJUSE酒店管理系统中，当网站管理员填需要删除用户信息时，网站管理员业务逻辑处理的相关对象之间的协作。
![moveUser](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7.png)

下图表明了NJUSE酒店管理系统中，当网站管理员修改酒店指定的管理员时，网站管理员业务逻辑处理的相关对象之间的协作。
![changeHotelManager](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E6%94%B9%E5%8F%98%E9%85%92%E5%BA%97%E7%AE%A1%E7%90%86%E5%91%98.png)


(5)业务逻辑层的设计原理

利用委托式控制风格，每个界面需要访问的业务逻辑由各自的ServiceImpl委托给不同的领域对象。

#### 4.1.2 couponbl模块(qzx)
#### 4.1.3 hotelbl模块(xzq)
（1）模块描述

    hotelbl模块承担地需求参见需求规格说明文档功能需求及相关非功能需求。
    hotelbl模块的职责及接口参见系统体系结构描述文档。
    
（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为web展示层、restful api层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会
添加接口。restful api层和业务逻辑层之间添加controller.hotel.HotelController接口，controller.hotel.HotelController接口通过调用
bl.hotel.HotelService，bl.hotel.RoomService接口实现。业务逻辑层和数据层之间添加data.hotel.HotelMapper，data.hotel.RoomMapper接口。
这样，我们将依赖于接口而非实体类，增加了系统的灵活性。

hotelbl模块的设计如下图所示：
![hotelbl模块设计图]()

hotelbl模块各个类的职责如下表所示：

|  模块 |  职责 |
| :-----: | :-----: |
|HotelService|接口类，负责提供网站管理员相关操作的接口|
|RoomService|接口类，负责提供酒店管理员相关操作的接口|
|HotelServiceImpl|负责实现网站管理员相关操作|
|RoomServiceImpl|负责实现酒店管理员相关操作|
|User|系统用户的领域模型对象，拥有使用者的身份信息，可以用于核验身份并提供相应身份的服务|

（3）模块内部类的接口规范
HotelServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        HotelServiceImpl.addHotel
      </td>
      <td style="text-align: center;">
        语法
      </td>
      <td style="text-align: center;">
        public void addHotel(HotelVO hotelVO);
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        前置条件
      </td>
      <td style="text-align: center;">
        已创建一个hotelVO对象，并且输入符合输入规则
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        后置条件
      </td>
      <td style="text-align: center;">
        添加一个新的酒店对象，并返回用户列表。
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        HotelServiceImpl.updateRoomNum
      </td>
      <td colspan="1" style="text-align: center;">
        语法
      </td>
      <td colspan="1" style="text-align: center;">
        public void updateRoomNum(Integer hotelId, String roomType, Integer rooms);
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        前置条件
      </td>
      <td colspan="1" style="text-align: center;">
        存在相应的列表数据
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        后置条件
      </td>
      <td colspan="1" style="text-align: center;">
        以列表形式返回所有房间信息
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        HotelServiceImpl.getRoomCurNum
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        public int getRoomCurNum(Integer hotelId, String roomType)
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在对应的房间Num</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回房间Num对应的房间类型</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.retrieveHotels</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<HotelVO> retrieveHotels()</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>存在相应的列表数据</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>以列表形式返回所有酒店信息</p>
      </td>
    </tr> 
     <tr>
          <td colspan="1" rowspan="3" style="text-align: center;">
            HotelServiceImpl.retrieveHotelDetails
          </td>
          <td colspan="1" style="text-align: center;">
            <p>语法</p>
          </td>
          <td colspan="1" style="text-align: center;">
            public HotelVO retrieveHotelDetails(Integer hotelId)
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            <p>前置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>数据库中存在对应的酒店id</p>
          </td>
     </tr>
    <tr>
          <td colspan="1" style="text-align: center;">
            <p>后置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>返回酒店id对应的详细信息</p>
          </td>
        </tr>
        <tr>
          <td colspan="1" rowspan="3" style="text-align: center;">
            <p>HotelServiceImpl.retrieveHotelDetailByManagerId</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>语法</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>public HotelVO retrieveHotelDetailByManagerId(int userid);</p>
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            <p>前置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>数据库中存在对应的酒店ID和酒店管理员ID</p>
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            <p>后置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>以列表形式返回酒店id的详细信息</p>
          </td>
        </tr> 
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.getHotelOrders</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<Order> getHotelOrders(Integer hotelId)</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在酒店id对应的酒店</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>以列表形式传递指令信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.moveHotel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public ResponseVO moveHotel(Integer hotelId)</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在酒店ID对应的酒店</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>删除酒店id对应的酒店</p>
      </td>
    </tr>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.updateHotelInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public ResponseVO updateHotelInfo(int managerid, String bizRegion, String address, String hotelDescription, String phoneNumber)</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在酒店ID对应的酒店</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>更新酒店id对应的详细信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.getHotelByBizAndCity</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p> public List<HotelVO> getHotelByBizAndCity(String bizRegion, String city)</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在酒店ID对应的酒店</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>更新酒店id对应的商圈和城市信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.sortByStar</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p> public List<HotelVO> sortByStar(List<HotelVO> hotels)</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在相应酒店列表信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>按星级排序展示酒店</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.retrieveCities</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<String> retrieveCities();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在相应城市列表信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>列表形式展示城市的详细信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.retrieveBizRegions</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<String> retrieveBizRegions()();</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在相应商圈列表信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>列表形式展示商圈的详细信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>列表形式展示城市的详细信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.retrieveOrdered</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<HotelVO> retrieveOrdered(String bizRegion,String city,Integer userId);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在相应酒店信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>更新酒店的详细信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>HotelServiceImpl.searchHotel</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>public List<HotelVO> searchHotel(String bizRegion, String city, String hotelName);</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在相应酒店信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>根据条件返回对应的酒店详细信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的接口（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
    <tr>
       <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
          <p>vo.userForm</p>
       </td>
       <td rowspan="1" colspan="2" style="text-align: center;">
          <p>用户信息表单类</p>
       </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.User</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>用户实体类</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>HotelMapper.addHotel(HotelVO hotelVO)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>新增一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>HotelMapper.updateRoomNum(Integer hotelId, String roomType, Integer rooms)</p>
      </td>
      <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
        <p>以列表形式获取所有身份类型为Hotel的用户单一持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p> HotelMapper.getRoomCurNum(Integer hotelId, String roomType)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>根据酒店ID删除一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p> HotelMapper.moveUser(int userId)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>根据用户ID删除一个用户持久化对象</p>
      </td>
    </tr>
  </tbody>
</table>

RoomServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        RoomServiceImpl.retrieveHotelRoomInfo
      </td>
      <td style="text-align: center;">
        语法
      </td>
      <td style="text-align: center;">
        public List<HotelRoom> retrieveHotelRoomInfo(Integer hotelId)
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        前置条件
      </td>
      <td style="text-align: center;">
        数据库中存在对应的房间信息
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        后置条件
      </td>
      <td style="text-align: center;">
        更新房间id对应的房间信息
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        RoomServiceImpl.insertRoomInfo
      </td>
      <td colspan="1" style="text-align: center;">
        语法
      </td>
      <td colspan="1" style="text-align: center;">
        public void insertRoomInfo(HotelRoom hotelRoom);
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        前置条件
      </td>
      <td colspan="1" style="text-align: center;">
        数据库中存在相应的房间数据
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        后置条件
      </td>
      <td colspan="1" style="text-align: center;">
        插入房间信息
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        RoomServiceImpl.updateRoomInfo
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        public ResponseVO updateRoomInfo(Integer id,Double price,Integer total,Integer curNum)
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在对应的房间id</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>更新房间id对应的房间信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>RoomServiceImpl.getRoomCurNum</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p> public int getRoomCurNum(Integer hotelId, String roomType)</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库存在相应的房间数据</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>获取当前的房间Num</p>
      </td>
    </tr> 
     <tr>
          <td colspan="1" rowspan="3" style="text-align: center;">
            RoomServiceImpl.moveRoom
          </td>
          <td colspan="1" style="text-align: center;">
            <p>语法</p>
          </td>
          <td colspan="1" style="text-align: center;">
            public RoomVO moveRoom(Integer roomId)
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            <p>前置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>数据库中存在对应的房间id</p>
          </td>
     </tr>
    <tr>
          <td colspan="1" style="text-align: center;">
            <p>后置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>删除房间id对应的详细信息</p>
          </td>
        </tr>
        <tr>
          <td colspan="1" rowspan="3" style="text-align: center;">
            <p>RoomServiceImpl.getRoomInfo</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>语法</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>public HotelRoom getRoomInfo(Integer roomId);</p>
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            <p>前置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>数据库中存在对应房间id的详细信息</p>
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            <p>后置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>以列表形式返回房间id的详细信息</p>
          </td>
        </tr> 
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的接口（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
    <tr>
       <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
          <p>vo.userForm</p>
       </td>
       <td rowspan="1" colspan="2" style="text-align: center;">
          <p>用户信息表单类</p>
       </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.User</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>用户实体类</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>RoomMapper.retrieveHotelRoomInfo(Integer hotelId)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>获取房间信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>RoomMapper.updateRoomInfo(Integer id,Double price,Integer total,Integer curNum)</p>
      </td>
      <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
        <p>以列表形式获取所有身份类型为Room的用户单一持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p> RoomMapper.insertRoomInfo(HotelRoom hotelRoom)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>插入一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p> RoomMapper.moveRoom(Integer roomId)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>根据用户ID删除一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>RoomMapper.getRoomInfo(Integer roomId)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
         返回房间的详细信息
      </td>
    </tr>
  </tbody>
</table>

(4)业务逻辑层的动态模型

下图表明了NJUSE酒店管理系统中，当网站管理员填写好需要添加的用户表单时，网站管理员业务逻辑处理的相关对象之间的协作。

![addManager动态模型]()


(5)业务逻辑层的设计原理

利用委托式控制风格，每个界面需要访问的业务逻辑由各自的ServiceImpl委托给不同的领域对象。
#### 4.1.4 orderbl模块

##### 需要的服务
（1）模块描述

    orderbl模块承担地需求参见需求规格说明文档功能需求及相关非功能需求。
    orderbl模块的职责及接口参见系统体系结构描述文档。
    
（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为web展示层、restful api层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会
添加接口。restful api层和业务逻辑层之间添加controller.order.OrderController接口，controller.order.OrderController接口通过调用
bl.order.OrderService接口实现。业务逻辑层和数据层之间添加data.order.OrderMapper接口。
这样，我们将依赖于接口而非实体类，增加了系统的灵活性。

orderbl模块的设计如下图所示：
![orderbl模块设计图]()

orderbl模块各个类的职责如下表所示：

|  模块 |  职责 |
| :-----: | :-----: |
|OrderService|接口类，负责提供订单相关操作的接口|
|OrderServiceImpl|负责实现订单相关操作|
|User|系统用户的领域模型对象，拥有使用者的身份信息，可以用于核验身份并提供相应身份的服务|
|Order|订单的领域模型对象，拥有订单的所有信息|


（3）模块内部类的接口规范
OrderServiceImpl的接口规范如下表所示：

<table border="3">
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
        <th> </th>
        <th> </th>
        <th> </th>
    </tr>
    <tr>
        <td rowspan="3"> OrderServiceImpl.addOrder </td>
        <td> 语法</td>
        <td> public ResponseVO addOrder(OrderVO orderVO);</td>
    </tr>
    <tr>
        <td> 前置条件</td>
        <td> 此ordervo信息不存在</td>
    </tr>
    <tr>
        <td>后置条件 </td>
        <td> 在数据库中增加一个订单记录</td>
    </tr>
    <tr>
        <td rowspan="3"> OrderServiceImpl.getAllOrders </td>
        <td> 语法</td>
        <td>  public List&lt;Order&gt; getAllOrders();</td>
    </tr>
    <tr>
        <td> 前置条件</td>
        <td> 无</td>
    </tr>
    <tr>
        <td>后置条件 </td>
        <td> 列表形式返回所有订单信息</td>
    </tr>    
    <tr>
        <td rowspan="3"> OrderServiceImpl.getUserOrders </td>
        <td> 语法</td>
        <td> public List&lt;Order&gt; getUserOrders(int userid);</td>
    </tr>
    <tr>
        <td> 前置条件</td>
        <td> 指定用户userid存在 </td>
    </tr>
    <tr>
        <td>后置条件 </td>
        <td> 列表形式返回该user的所有订单信息</td>
    </tr>
    <tr>
        <td rowspan="3"> OrderServiceImpl.annulOrder </td>
        <td> 语法</td>
        <td> public ResponseVO annulOrder(int orderid);</td>
    </tr>
    <tr>
        <td> 前置条件</td>
        <td> 此orderid存在 </td>
    </tr>
    <tr>
        <td>后置条件 </td>
        <td> 删除此orderid的订单信息</td>
    </tr>    
    <tr>
        <td rowspan="3"> OrderService.processOrder </td>
        <td> 语法</td>
        <td> public ResponseVO processOrder(int orderid);</td>
    </tr>
    <tr>
        <td> 前置条件</td>
        <td> 此orderid存在 </td>
    </tr>
    <tr>
        <td>后置条件 </td>
        <td> 修改订单状态为已执行</td>
    </tr>
    <tr>
        <td rowspan="3"> OrderServiceImpl.retrieveOrder </td>
        <td> 语法</td>
        <td> public Order retrieveOrder(Integer orderId);</td>
    </tr>
    <tr>
        <td> 前置条件</td>
        <td> 此orderId在数据库中存在 </td>
    </tr>
    <tr>
        <td>后置条件 </td>
        <td> 以Order形式获取该特定订单的全部信息</td>
    </tr>  
        <tr>
        <td rowspan="3"> OrderServiceImpl.retrieveHotelOrders </td>
        <td> 语法</td>
        <td> public List&lt;Order&gt; retrieveHotelOrders(Integer hotelId);</td>
    </tr>
    <tr>
        <td> 前置条件</td>
        <td> 此hotelId在数据库中存在 </td>
    </tr>
    <tr>
        <td>后置条件 </td>
        <td> 以列表形式返回该酒店的全部订单信息</td>
    </tr> 
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的接口（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
    <tr>
       <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
          <p>vo.orderVO</p>
       </td>
       <td rowspan="1" colspan="2" style="text-align: center;">
          <p>订单表单类</p>
       </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.User</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>用户实体类</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>orderMapper.addOrder(Order order)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>新增一个用订单持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>hotelService.updateRoomNum(Integer hotelId, String roomType,Integer rooms)</p>
      </td>
      <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
        <p>添加订单后更新酒店房间数量</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p> orderMapper.getAllOrders()</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>返回所有订单</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>orderMapper.getUserOrders(int userid)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
         返回userid对应用户的所有订单
      </td>
    </tr> 
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>orderMapper.annulOrder(int orderid)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
         删除orderid对应的订单信息
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>orderMapper.processOrder(int orderid)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
         修改orderid对应的订单状态
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>orderMapper.getOrderById(Integer orderId)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
         返回orderId对应的订单信息
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>orderMapper.getHotelOrders(Integer hotelId)</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
         返回hotelId对应的酒店的所有订单信息
      </td>
    </tr>                     
</table>

(4)业务逻辑层的动态模型

下图表明了NJUSE酒店管理系统中，当客户填写好需要添加的订单表单时，订单业务逻辑处理的相关对象之间的协作。

![addOrder](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E7%94%9F%E6%88%90%E8%AE%A2%E5%8D%95.png)

下图表明了NJUSE酒店管理系统中，当网站营销人员需要获取所有订单信息时，订单业务逻辑处理的相关对象之间的协作。
![getAllOrders]( https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E8%AE%A2%E5%8D%95.png)

下图表明了NJUSE酒店管理系统中，当客户需要查看自己的订单信息时，订单业务逻辑处理的相关对象之间的协作。
![getUserOrders](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%8E%B7%E5%8F%96%E9%A1%BE%E5%AE%A2%E8%AE%A2%E5%8D%95.png)

下图表明了NJUSE酒店管理系统中，当客户选择撤销已预订的订单时，订单业务逻辑处理的相关对象之间的协作。
![annulOrder](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E6%92%A4%E9%94%80%E8%AE%A2%E5%8D%95.png)

下图表明了NJUSE酒店管理系统中，当酒店管理员执行酒店订单时，订单业务逻辑处理的相关对象之间的协作。
![processOrder](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E6%89%A7%E8%A1%8C%E8%AE%A2%E5%8D%95.png)

下图表明了NJUSE酒店管理系统中，当客户或酒店管理员需要查看订单详情时，订单业务逻辑处理的相关对象之间的协作。
![retrieveOrder](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%8E%B7%E5%8F%96%E8%AE%A2%E5%8D%95%E8%AF%A6%E6%83%85.png)

下图表明了NJUSE酒店管理系统中，当酒店管理员需要查看本酒店所有订单时，订单业务逻辑处理的相关对象之间的协作。
![retrieveHotelOrders](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%8E%B7%E5%8F%96%E9%85%92%E5%BA%97%E8%AE%A2%E5%8D%95.png)


(5)业务逻辑层的设计原理

利用委托式控制风格，每个界面需要访问的业务逻辑由各自的ServiceImpl委托给不同的领域对象。



#### 4.1.5 userbl模块
（1）模块描述

    userbl模块承担的需求参见需求规格说明文档功能需求及相关非功能需求。
    userbl模块的职责及接口参见系统体系结构描述文档。
    
（2）整体结构

根据体系结构的设计，我们使用分层的模式来构建本系统，将系统分为web展示层、restful api层、业务逻辑层、数据层。每一层之间为了增加灵活性，我们会
添加接口。restful api层和业务逻辑层之间添加controller.user.AccountController接口，controller.user.AccountController接口通过调用
bl.user.AccountService接口和bl.user.EvaluationService接口实现。业务逻辑层和数据层之间添加data.user.AccountMapper接口和data.user.EvaluationMapper接口。
这样，我们将依赖于接口而非实体类，增加了系统的灵活性。

userbl模块的设计如下图所示：
![userbl模块设计图]()

userbl模块各个类的职责如下表所示：

|  模块 |  职责 |
| :-----: | :-----: |
|AccountService|接口类，负责提供普通用户（客户）相关操作的接口|
|AdminServiceImpl|负责实现普通用户（客户）相关操作|
|EvaluationService|接口类，负责提供与酒店评价相关操作的接口|
|EvaluationServiceImpl|负责实现用户评价酒店和获取酒店评价信息的操作|
|User|系统用户的领域模型对象，拥有使用者的身份信息，可以用于核验身份并提供相应身份的服务|
|Evaluation|酒店评价的领域模型对象，拥有评价信息，可以用于提供进行评价及获取评价的服务|

（3）模块内部类的接口规范
AccountServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        AccountServiceImpl.registerAccount
      </td>
      <td style="text-align: center;">
        语法
      </td>
      <td style="text-align: center;">
         public ResponseVO registerAccount(UserVO userVO);
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        前置条件
      </td>
      <td style="text-align: center;">
        已创建一个UserVO对象，并且输入符合输入规则
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        后置条件
      </td>
      <td style="text-align: center;">
        注册一个新的用户对象。
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        AccountServiceImpl.login
      </td>
      <td colspan="1" style="text-align: center;">
        语法
      </td>
      <td colspan="1" style="text-align: center;">
        public User login(UserForm userForm);
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        前置条件
      </td>
      <td colspan="1" style="text-align: center;">
        存在相应的用户信息
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        后置条件
      </td>
      <td colspan="1" style="text-align: center;">
        以该用户的身份登录系统
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        AccountServiceImpl.getUserInfo
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        public User getUserInfo(int id);
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在对应的用户ID</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>返回用户ID对应的用户信息</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="3" style="text-align: center;">
        <p>AccountServiceImpl.updateUserInfo</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>语法</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p> public ResponseVO updateUserInfo(int id, String password, String username, String phonenumber) ;</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>前置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>数据库中存在对应的用户ID</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        <p>后置条件</p>
      </td>
      <td colspan="1" style="text-align: center;">
        <p>修改用户ID对应的用户信息中的密码、用户名、电话号码为相应信息</p>
      </td>
    </tr> 
    <tr>
          <td colspan="1" rowspan="3" style="text-align: center;">
            <p>AccountServiceImpl.updateUserVip</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>语法</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p> public ResponseVO updateUserVip(int id, int vip, Date birthday);</p>
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            <p>前置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>数据库中存在对应的用户ID,输入的日期符合输入规则</p>
          </td>
        </tr>
        <tr>
          <td colspan="1" style="text-align: center;">
            <p>后置条件</p>
          </td>
          <td colspan="1" style="text-align: center;">
            <p>修改用户ID对应的用户信息中的会员信息</p>
          </td>
        </tr>
        <tr>
                  <td colspan="1" rowspan="3" style="text-align: center;">
                    <p>AccountServiceImpl.updateUserVip</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                    <p>语法</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                    <p> public ResponseVO updateUserVip(int id, int vip, Date birthday);</p>
                  </td>
                </tr>
                <tr>
                  <td colspan="1" style="text-align: center;">
                    <p>前置条件</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                    <p>数据库中存在对应的用户ID,输入的日期符合输入规则</p>
                  </td>
                </tr>
                <tr>
                  <td colspan="1" style="text-align: center;">
                    <p>后置条件</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                    <p>修改用户ID对应的用户信息中的会员信息</p>
                  </td>
                </tr> 
        <tr>
                  <td colspan="1" rowspan="3" style="text-align: center;">
                    <p>AccountServiceImpl.getAllClients</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                    <p>语法</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                    <p> public List&lt;User&gt; getAllClients();</p>
                  </td>
                </tr>
                <tr>
                  <td colspan="1" style="text-align: center;">
                    <p>前置条件</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                    <p>无</p>
                  </td>
                </tr>
                <tr>
                  <td colspan="1" style="text-align: center;">
                    <p>后置条件</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                    <p>列表形式返回所有用户类型为客户的用户信息</p>
                  </td>
                </tr>  
    <tr>
                      <td colspan="1" rowspan="3" style="text-align: center;">
                        <p>AccountServiceImpl.getAllClients</p>
                      </td>
                      <td colspan="1" style="text-align: center;">
                        <p>语法</p>
                      </td>
                      <td colspan="1" style="text-align: center;">
                        <p> public List&lt;User&gt; getAllClients();</p>
                      </td>
                    </tr>
                    <tr>
                      <td colspan="1" style="text-align: center;">
                        <p>前置条件</p>
                      </td>
                      <td colspan="1" style="text-align: center;">
                        <p>无</p>
                      </td>
                    </tr>
                    <tr>
                      <td colspan="1" style="text-align: center;">
                        <p>后置条件</p>
                      </td>
                      <td colspan="1" style="text-align: center;">
                        <p>列表形式返回所有用户类型为客户的用户信息</p>
                      </td>
                    </tr>  
                    <tr>
                                      <td colspan="1" rowspan="3" style="text-align: center;">
                                        <p>AccountServiceImpl.getAllClients</p>
                                      </td>
                                      <td colspan="1" style="text-align: center;">
                                        <p>语法</p>
                                      </td>
                                      <td colspan="1" style="text-align: center;">
                                        <p> public List&lt;User&gt; getAllClients();</p>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td colspan="1" style="text-align: center;">
                                        <p>前置条件</p>
                                      </td>
                                      <td colspan="1" style="text-align: center;">
                                        <p>无</p>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td colspan="1" style="text-align: center;">
                                        <p>后置条件</p>
                                      </td>
                                      <td colspan="1" style="text-align: center;">
                                        <p>列表形式返回所有用户类型为客户的用户信息</p>
                                      </td>
                                    </tr>  
                    <tr>
                                      <td colspan="1" rowspan="3" style="text-align: center;">
                                        <p>AccountServiceImpl.addCredit</p>
                                      </td>
                                      <td colspan="1" style="text-align: center;">
                                        <p>语法</p>
                                      </td>
                                      <td colspan="1" style="text-align: center;">
                                        <p> public ResponseVO addCredit(Integer userId,Integer creditAdded);</p>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td colspan="1" style="text-align: center;">
                                        <p>前置条件</p>
                                      </td>
                                      <td colspan="1" style="text-align: center;">
                                        <p>存在相应的用户ID</p>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td colspan="1" style="text-align: center;">
                                        <p>后置条件</p>
                                      </td>
                                      <td colspan="1" style="text-align: center;">
                                        <p>为用户ID对应的用户增加相应的信用值</p>
                                      </td>
                                    </tr> 
              <tr>
                    <td colspan="1" rowspan="3" style="text-align: center;">
                        <p>AccountServiceImpl.addCredit</p>
                    </td>
                    <td colspan="1" style="text-align: center;">
                       <p>语法</p>
                    </td>
                    <td colspan="1" style="text-align: center;">
                       <p> public ResponseVO addCredit(Integer userId,Integer creditAdded);</p>
                    </td>
              </tr>
              <tr>
                  <td colspan="1" style="text-align: center;">
                      <p>前置条件</p>
                  </td>
                  <td colspan="1" style="text-align: center;">
                      <p>存在相应的用户ID</p>
                  </td>
              </tr>
               <tr>
               <td colspan="1" style="text-align: center;">
                    <p>后置条件</p>
               </td>
               <td colspan="1" style="text-align: center;">
                   <p>为用户ID对应的用户增加相应的信用值</p>
               </td>
               </tr> 
               <tr>
                                   <td colspan="1" rowspan="3" style="text-align: center;">
                                       <p>AccountServiceImpl.moveMember</p>
                                   </td>
                                   <td colspan="1" style="text-align: center;">
                                      <p>语法</p>
                                   </td>
                                   <td colspan="1" style="text-align: center;">
                                      <p> public ResponseVO moveMember(Integer userId);</p>
                                   </td>
                             </tr>
                             <tr>
                                 <td colspan="1" style="text-align: center;">
                                     <p>前置条件</p>
                                 </td>
                                 <td colspan="1" style="text-align: center;">
                                     <p>存在相应的用户ID</p>
                                 </td>
                             </tr>
                              <tr>
                              <td colspan="1" style="text-align: center;">
                                   <p>后置条件</p>
                              </td>
                              <td colspan="1" style="text-align: center;">
                                  <p>注销用户ID对应用户的会员信息</p>
                              </td>
                              </tr>     
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的接口（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>vo.ResponseVO</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>检查调用是否成功</p>
      </td>
    </tr>
    <tr>
       <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
          <p>vo.userForm</p>
       </td>
       <td rowspan="1" colspan="2" style="text-align: center;">
          <p>用户信息表单类</p>
       </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>po.User</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>用户实体类</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>AccountMapper.createNewAccount(User user)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>新增一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>AccountMapper.getAccountByName(String email)</p>
      </td>
      <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
        <p>根据用户邮箱返回一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p> AccountMapper.getAccountById(int id)</p>
      </td>
      <td colspan="2" style="background-color: #FFFFFF; text-align: center;">
        <p>根据用户ID返回一个用户持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>AccountMapper.updateAccount(int id, String password,String username,String phonenumber);
</p>
      </td>
      <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
         修改ID对应的用户密码、用户名、电话号码为参数中的相应值
      </td>
    </tr>
    <tr>
          <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
            <p>AccountMapper.updateVip(int id, int vip, Date birthday);</p>
          </td>
          <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
             注册会员，并修改用户会员信息
          </td>
    </tr>
    <tr>
          <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
              <p>AccountMapper.getAllClients();</p>
          </td>
          <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
              获取所有客户信息
           </td>
    </tr>
    <tr>
              <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
                  <p>AccountMapper.addCredit(Integer userId, Integer creditAdded);</p>
              </td>
              <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
                  为指定用户增加指定信用值
               </td>
    </tr>
    <tr>
           <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
                 <p>AccountMapper.moveMember(Integer userId);</p>
           </td>
           <td colspan="2" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
                 为指定用户注销会员身份
           </td>
    </tr>
  </tbody>
</table>



EvaluationServiceImpl的接口规范如下表所示：

<table class="lake-table">
  <tbody>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>提供的服务（供接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        EvaluationServiceImpl.retrieveHotelEvaluations
      </td>
      <td style="text-align: center;">
        语法
      </td>
      <td style="text-align: center;">
         public List &lt;Evaluation&gt; retrieveHotelEvaluations(Integer hotelId);
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        前置条件
      </td>
      <td style="text-align: center;">
        存在相应的酒店ID
      </td>
    </tr>
    <tr>
      <td style="text-align: center;">
        后置条件
      </td>
      <td style="text-align: center;">
        返回酒店ID对应的所有评价信息
      </td>
    </tr>
    <tr>
      <td rowspan="3" colspan="1" style="text-align: center;">
        EvaluationServiceImpl.insertEvaluationInfo
      </td>
      <td colspan="1" style="text-align: center;">
        语法
      </td>
      <td colspan="1" style="text-align: center;">
        public void insertEvaluationInfo(Evaluation evaluation);
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        前置条件
      </td>
      <td colspan="1" style="text-align: center;">
        输入一个评价对象信息，并且输入符合输入规则
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center;">
        后置条件
      </td>
      <td colspan="1" style="text-align: center;">
        添加一条评价信息
      </td>
    </tr>
    <tr>
      <td colspan="3" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p><strong>需要的接口（需接口）</strong></p>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>EvaluationMapper.insertEvaluation(Evaluation evaluation)</p>
      </td>
      <td rowspan="1" colspan="2" style="text-align: center;">
        <p>新增一个评价持久化对象</p>
      </td>
    </tr>
    <tr>
      <td colspan="1" style="text-align: center; background-color: #FFFFFF;">
        <p>EvaluationMapper.selectEvaByHotelId(Integer hotelId)</p>
      </td>
      <td colspan="2" style="text-align: center; background-color: #FFFFFF;">
        <p>根据酒店ID返回其相应的评价信息</p>
      </td>
    </tr>
  </tbody>
</table>

(4)业务逻辑层的动态模型

下图表明了NJUSE酒店管理系统中，当客户填写好需要添加的注册账号表单时，账号业务逻辑处理的相关对象之间的协作。
![registerAccount](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E6%B3%A8%E5%86%8C%E8%B4%A6%E5%8F%B7.png)

下图表明了NJUSE酒店管理系统中，当客户填写好账号邮箱和密码需要登录时，账号业务逻辑处理的相关对象之间的协作。
![login](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E7%99%BB%E5%BD%95.png)

下图表明了NJUSE酒店管理系统中，当用户需要获取自己的账号信息时，账号业务逻辑处理的相关对象之间的协作。
![getUserInfo](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF.png)

下图表明了NJUSE酒店管理系统中，当客户填写好需要修改的用户信息表单并提交修改时，账号业务逻辑处理的相关对象之间的协作。
![updateUserInfo](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E6%9B%B4%E6%94%B9%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF.png)

下图表明了NJUSE酒店管理系统中，当客户填写好需要添加的注册会员表单时，账号业务逻辑处理的相关对象之间的协作。
![updateUserVip](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E6%B3%A8%E5%86%8C%E4%BC%9A%E5%91%98.png)

下图表明了NJUSE酒店管理系统中，当网站管理员和网站营销人员需要获取所有客户信息时，账号业务逻辑处理的相关对象之间的协作。
![getAllClients](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8.png)

下图表明了NJUSE酒店管理系统中，当网站营销人员填写好为客户添加信用值的表单时，账号业务逻辑处理的相关对象之间的协作。
![addCredit](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E5%A2%9E%E5%8A%A0%E4%BF%A1%E7%94%A8%E5%80%BC.png)

下图表明了NJUSE酒店管理系统中，当客户选择注销会员身份时，账号业务逻辑处理的相关对象之间的协作。
![moveMember](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E6%B3%A8%E9%94%80%E4%BC%9A%E5%91%98.png)


下图表明了NJUSE酒店管理系统中，当客户填写好需要添加的评价表单时，评价业务逻辑处理的相关对象之间的协作。

![insertEvaluationInfo动态模型](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%AF%84%E4%BB%B7%E9%85%92%E5%BA%97.png)

下图表明了NJUSE酒店管理系统中，当酒店页面需要显示评价信息时，评价业务逻辑处理的相关对象之间的协作。
![retrieveHotelEvaluations](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E8%8E%B7%E5%8F%96%E9%85%92%E5%BA%97%E8%AF%84%E4%BB%B7.png)



(5)业务逻辑层的设计原理

利用委托式控制风格，每个界面需要访问的业务逻辑由各自的ServiceImpl委托给不同的领域对象。


## 5.依赖视角

下图是客户端包之间的依赖关系：

![客户端包图](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E5%89%8D%E7%AB%AF.png)

下图是服务器端包之前的依赖关系：

![服务器端包图](https://image-store-se.oss-cn-shanghai.aliyuncs.com/%E5%90%8E%E7%AB%AF.png)